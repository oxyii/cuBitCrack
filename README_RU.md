# Высокопроизводительный форк BitCrack

Оригинальный README можно найти [тут](https://github.com/brichard19/BitCrack).

## Внесенные изменения

Полностью вырезан OpenCL.
CUDA собирается по умолчанию без указания env var `BUILD_CUDA`.

### Оптимизация объема памяти

Полностью переделана инициализация.
В оригинальной версии на хосте создавались ключи, которые копировались на GPU, далее из этих ключей формировались точки.
После формирования точек ключи с GPU вычищались и оставалось незадействованной более 25% памяти.

Теперь ключ на хосте формируется один.
GPU сама на лету просчитывает нужный отступ ключа для своего потока и формирует свою точку.
Результат - возможность использования почти всей памяти.

### Оптимизация скорости работы

Использован паттерн объединенного доступа к памяти, благодаря чему удалось существенно повысить производительность не ломая изначальную логику.

Для примера: скромная RTX 4060 на оригинальной сборке выжимала `750-770 MKey/s`.
- В этой сборке - `970+ MKey/s` при `-b 288 -t 256 -p 1024` или `-b 576 -t 128 -p 1024` (`75,497,472 starting points`, память `7030 / 7805MB`).

На самом деле, замеры показали, что вычислительный потенциал намного выше.
Конкретно RTX 4060 способна "плюсовать" по 1500 MKey/s.
Проблема в пропускной способности шины памяти.

RTX 4090: `-b 896 -t 256 -p 1024` - `3630+ MKey/s` (`234,881,024 starting point`, память `21901 / 24080MB`).

### Косметические правки

- В выдачу добавлен формат WIF.
- В список агрументов добавлена возможность уведомления в Telegram.
- Исправлена ошибка Bloom-фильтра. Кто не понял - можно больше 16 target указывать.
- Если в файле targets будет ошибка, система не будет остановлена. Уведомит сколько строк пропущено и начнет обработку без невалидных.
- Зависимость настроена на CUDA 13.0, но можно понизить до 12.x. Тестировалось на 12.8.
- Обновлены флаги компиляции.
- Куча мелких доработок, исправлений, оптимизаций.

## Сборка

Собирается из-под Linux (тестировалось на Ubuntu) и из-под Windows.
По сравнению с оригинальной версией - ничего нового: выставляем свой `sm cap` и собираем, без флага `BUILD_CUDA`.
По умолчанию выставлен `sm cap 89` (RTX 40xx).

## Отказ от ответственности

_Это программное обеспечение предоставляется "как есть", без каких-либо гарантий._
_Оно предназначено исключительно для исследовательских целей: изучения оптимизации производительности на платформе CUDA._

_**Внимание, риск для оборудования:** Данный код создает экстремальную нагрузку на графические процессоры, что может привести к их перегреву и выходу из строя при неправильной эксплуатации._
_Вы используете ее на свой страх и риск._
_Разработчик не несет ответственности за любой ущерб, нанесенный вашему оборудованию._

_**Важное юридическое замечание:** Разработчик не поощряет и не поддерживает использование этого кода для любых незаконных действий, включая, но не ограничиваясь, попытками несанкционированного доступа к кошелькам или данным третьих лиц._
_Любое подобное использование является нарушением законодательства большинства стран._
_Вся ответственность за применение программы лежит на конечном пользователе._
